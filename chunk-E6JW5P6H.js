import{a as W}from"./chunk-QPVH3RXL.js";import"./chunk-4SU3ILNA.js";import{p as G,q as H,r as j,s as z,t as U}from"./chunk-ODHERY6O.js";import{a as O,f as N,j as q,r as J,z as K}from"./chunk-UQ6H7UZN.js";import"./chunk-U3QUSVWF.js";import{a as B}from"./chunk-SJAHQ6V3.js";import{fa as M}from"./chunk-66N5ZWW3.js";import{h as R,j as I}from"./chunk-YUIZQQQA.js";import{$b as h,Ba as u,Cb as C,Eb as S,Fb as y,Gb as a,Hb as r,Ib as A,Mb as g,Ob as d,Pb as o,Sb as T,Xa as p,Yb as $,Zb as D,a as b,b as E,c as F,ca as f,fc as w,gb as V,lb as m,ma as _,na as c,oc as L,sa as P,wb as v,yb as k}from"./chunk-4YCFH6U6.js";var X=(e,i)=>i.value,Y=()=>({"min-width":"60rem"}),Z=()=>[1,2,5,10,25];function tt(e,i){if(e&1){let t=g();a(0,"p-button",11),d("onClick",function(){_(t);let l=o(),s=$(7);return l.onSort(null),c(s.reset())}),r()}}function et(e,i){if(e&1&&(a(0,"th",12),D(1),A(2,"p-sortIcon",14),r()),e&2){let t=o().$implicit;T("pSortableColumn",t.value),p(),h(" ",t.title," "),p(),T("field",t.value)}}function it(e,i){if(e&1&&(a(0,"th",13),D(1),r()),e&2){let t=o().$implicit;p(),h(" ",t.title,"")}}function nt(e,i){if(e&1&&m(0,et,3,3,"th",12)(1,it,2,1,"th",13),e&2){let t,n=i.$implicit,l=o(2);C(((t=l.clients())==null?null:t.length)>1&&n.value!=="_actions"?0:1)}}function ot(e,i){if(e&1&&(a(0,"tr"),S(1,nt,2,1,null,null,X),r()),e&2){let t=o();p(),y(t.columns())}}function lt(e,i){if(e&1&&D(0),e&2){let t=o(2).$implicit,n=o().$implicit,l=o();h(" ",l.GENDERS_MAP[n[t.value]]," ")}}function rt(e,i){if(e&1&&D(0),e&2){let t=o(2).$implicit,n=o().$implicit;h(" ",n[t.value]," ")}}function at(e,i){if(e&1&&m(0,lt,1,1)(1,rt,1,1),e&2){let t=o().$implicit;C(t.value=="gender"?0:1)}}function st(e,i){if(e&1){let t=g();a(0,"div",16)(1,"p-button",17),d("click",function(){_(t);let l=o(3).$implicit,s=o();return c(s.onEdit(l.id))}),r(),a(2,"p-button",18),d("click",function(){_(t);let l=o(3).$implicit,s=o();return c(s.onDelete(l.id))}),r()()}}function ut(e,i){if(e&1&&m(0,st,3,0,"div",16),e&2){let t=o(2).$implicit;C(t.active?0:-1)}}function pt(e,i){if(e&1&&(a(0,"td"),m(1,at,2,1)(2,ut,1,1),r()),e&2){let t=i.$implicit,n=o().$implicit;k("disabled",!n.active),p(),C(t.value!=="_actions"?1:2)}}function _t(e,i){if(e&1&&(a(0,"tr"),S(1,pt,3,3,"td",15,X),r()),e&2){let t=o();p(),y(t.columns())}}function ct(e,i){e&1&&(a(0,"div",9),D(1," \u10D9\u10DA\u10D8\u10D4\u10DC\u10E2\u10D4\u10D1\u10D8\u10E1 \u10E1\u10D8\u10D0 \u10D5\u10D4\u10E0 \u10DB\u10DD\u10D8\u10EB\u10D4\u10D1\u10DC\u10D0 "),r())}function mt(e,i){if(e&1){let t=g();a(0,"p-paginator",19),d("onPageChange",function(l){_(t);let s=o();return c(s.onPageChange(l))}),r()}if(e&2){let t=o();v("first",t.first())("rows",t.limit())("totalRecords",t.total())("rowsPerPageOptions",w(4,Z))}}var Q=class e{_store=f(N);_route=f(R);_router=f(I);_destroyRef=f(P);_clientsService=f(W);_snapshot=u(this.generateSnapShot);clients=u([]);total=u(0);columns=u([{value:"name",title:"\u10E1\u10D0\u10EE\u10D4\u10DA\u10D8"},{value:"lastName",title:"\u10D2\u10D5\u10D0\u10E0\u10D8"},{value:"personalNumber",title:"\u10DE/\u10DC"},{value:"gender",title:"\u10E1\u10E5\u10D4\u10E1\u10D8"},{value:"mobile",title:"\u10E2\u10D4\u10DA:"},{value:"_actions",title:"\u10E5\u10DB\u10D4\u10D3\u10D4\u10D1\u10D0"}]);first=u((this._snapshot()?.page-1)*this._snapshot()?.limit||0);page=u(this._snapshot()?.page||0);limit=u(this._snapshot()?.limit||10);sortField=u(this._snapshot()?.field||void 0);sortOrder=u(+this._snapshot()?.order||void 0);hasFilter=u(!1);GENDERS_MAP=q;constructor(){this._clientsService.isFirstLoad()&&this.dispatchClients(),this.listenToClients()}onSort(i){let t=i!==null;this.sortField.set(t?i.field:void 0),this.sortOrder.set(t?i.order:void 0);let x=this.generateSnapShot,{field:n,order:l}=x,s=F(x,["field","order"]);this._router.navigate([],{relativeTo:this._route,queryParams:t?{field:this.sortField(),order:this.sortOrder()}:b({},s),queryParamsHandling:t?"merge":"replace"}).then(()=>{this._snapshot.set(this.generateSnapShot),this.hasFilter.set(this._snapshot()?.field||this._snapshot()?.order)})}onAddAccount(){this._router.navigate(["account","add"])}onAddClient(){this._router.navigate(["client","add"])}onDelete(i){this._store.dispatch(K({id:i}))}onEdit(i){this._router.navigate(["client","edit",i])}onPageChange(i){let t={};this.first.set(i.first);let n=i.page+1;n!==this.page()&&(this.page.set(n),t=E(b({},t),{page:this.page()})),i.rows!==this.limit()&&(this.limit.set(i.rows),t=E(b({},t),{limit:this.limit()})),this._router.navigate([],{relativeTo:this._route,queryParams:t,queryParamsHandling:"merge"}),this.dispatchClients()}get generateSnapShot(){return this._route.snapshot.queryParams}listenToClients(){this._store.select("clients").pipe(O(this._destroyRef)).subscribe(i=>{this._clientsService.isFirstLoad.set(!1),this.clients.set(i.data),this.total.set(i.count)})}dispatchClients(){this._store.dispatch(J({page:this.page(),limit:this.limit()}))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=V({type:e,selectors:[["app-client-list"]],decls:14,vars:7,consts:[["table",""],["header",""],["body",""],[1,"px-3"],[1,"mb-3"],["label","\u10D9\u10DA\u10D8\u10D4\u10DC\u10E2\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0","icon","pi pi-plus","severity","success",1,"me-2",3,"onClick"],["label","\u10D0\u10DC\u10D2\u10D0\u10E0\u10D8\u10E8\u10D8\u10E1 \u10D3\u10D0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D0","icon","pi pi-plus","severity","contrast",1,"me-2",3,"onClick"],["label","\u10E4\u10D8\u10DA\u10E2\u10E0\u10D8\u10E1 \u10D2\u10D0\u10E1\u10E3\u10E4\u10D7\u10D0\u10D5\u10D4\u10D1\u10D0","icon","pi pi-times","severity","help",1,"me-2"],[3,"onSort","value","tableStyle","sortField","sortOrder"],["role","alert",1,"alert","alert-primary","font-size-14","mt-3"],[3,"first","rows","totalRecords","rowsPerPageOptions"],["label","\u10E4\u10D8\u10DA\u10E2\u10E0\u10D8\u10E1 \u10D2\u10D0\u10E1\u10E3\u10E4\u10D7\u10D0\u10D5\u10D4\u10D1\u10D0","icon","pi pi-times","severity","help",1,"me-2",3,"onClick"],[2,"width","20%",3,"pSortableColumn"],[2,"width","20%"],[3,"field"],[3,"disabled"],[1,"d-flex"],["icon","pi pi-user-edit","aria-label","\u10E0\u10D4\u10D3\u10D0\u10E5\u10E2\u10D8\u10E0\u10D4\u10D1\u10D0","severity","secondary",1,"ms-3",3,"click"],["icon","pi pi-trash","aria-label","\u10EC\u10D0\u10E8\u10DA\u10D0","severity","danger",1,"ms-3",3,"click"],[3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"]],template:function(t,n){if(t&1){let l=g();a(0,"div",3)(1,"div",4)(2,"p-button",5),d("onClick",function(){return _(l),c(n.onAddClient())}),r(),a(3,"p-button",6),d("onClick",function(){return _(l),c(n.onAddAccount())}),r(),m(4,tt,1,0,"p-button",7),r(),a(5,"p-card")(6,"p-table",8,0),d("onSort",function(x){return _(l),c(n.onSort(x))}),m(8,ot,3,0,"ng-template",null,1,L)(10,_t,3,0,"ng-template",null,2,L),r(),m(12,ct,2,0,"div",9)(13,mt,1,5,"p-paginator",10),r()()}if(t&2){let l;p(4),C(n.hasFilter()?4:-1),p(2),v("value",n.clients())("tableStyle",w(6,Y))("sortField",n.sortField())("sortOrder",n.sortOrder()),p(6),C((l=n.clients())!=null&&l.length?13:12)}},dependencies:[U,H,j,z,M,B,G],encapsulation:2})};export{Q as ClientListComponent};
