<div class="p-3">
  <div class="mb-3">
    <p-button label="დამატება" icon="pi pi-plus" severity="success" (onClick)="onAdd()"/>
  </div>
  <p-card>
    <p-table [value]="clients()" [tableStyle]="{'min-width': '60rem'}">
      <ng-template #header>
        <tr>
          @for (col of columns(); track col.value) {
            @if (col.value !== '_actions') {
              <th pSortableColumn="{{col.value}}" style="width:20%"> {{ col.title }}
                <p-sortIcon field="{{col.value}}"/>
              </th>
            } @else {
              <th style="width:20%"> {{ col.title }}</th>
            }
          }
        </tr>
      </ng-template>
      <ng-template #body let-client>
        <tr>
          @for (col of columns(); track col.value) {
            <td>
              @if (col.value !== '_actions') {
                {{ client[col.value] }}
              } @else {
                <div class="d-flex">
                  <p-button
                    class="ms-2"
                    icon="pi pi-user-edit"
                    aria-label="რედაქტირება"
                    severity="secondary"
                    (click)="onEdit(client.id)"
                  />
                  <p-button
                    class="ms-2"
                    icon="pi pi-trash"
                    aria-label="წაშლა"
                    severity="danger"
                    (click)="onDelete(client.id)"
                  />
                </div>
              }
            </td>
          }
        </tr>
      </ng-template>
    </p-table>
    <p-paginator
      [first]="_page()" [rows]="_limit()"
      [totalRecords]="total()"
      [rowsPerPageOptions]="[2, 5, 10]"
      (onPageChange)="onPageChange($event)"
    />
  </p-card>
</div>
