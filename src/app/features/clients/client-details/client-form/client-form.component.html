<p-card class="p-mb-3">
  <form [formGroup]="form()" (ngSubmit)="onSubmit()" class="flex justify-center row">
    <div class="d-flex flex-column p-field mb-2 col-md-6">
      <label class="mb-1" for="clientNumber">კლიენტის ნომერი</label>
      <input id="clientNumber" pInputText formControlName="clientNumber"/>
      @if (form().get('clientNumber')?.invalid && form().get('clientNumber')?.touched) {
        <small class="text-danger"> ველის შევსება სავალდებულოა </small>
      }
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-6">
      <label class="mb-1" for="name">სახელი</label>
      <input id="name" pInputText formControlName="name"/>
      @if (form().get('name')?.invalid && form().get('name')?.touched) {
        <small class="text-danger">
          @if (form().get('name').errors['required']) {
            ველის შევსება სავალდებულოა
          } @else if (form().get('name').errors['minlength']) {
            უნდა იყოს მინიმუმ 2 სიმბოლო
          } @else if (form().get('name').errors['maxlength']) {
            არ უნდა აღემატებოდეს 50 სიმბოლოს
          } @else if (form().get('name').errors['pattern']) {
            უნდა შეიცავდეს მხოლოდ ქართულ ან მხოლოდ ლათინურ ასოებს
          }
        </small>
      }
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-6">
      <label class="mb-1" for="lastName">გვარი</label>
      <input id="lastName" pInputText formControlName="lastName"/>
      @if (form().get('lastName')?.invalid && form().get('lastName')?.touched) {
        <small class="text-danger">
          @if (form().get('lastName').errors['required']) {
            ველის შევსება სავალდებულოა
          } @else if (form().get('lastName').errors['minlength']) {
            უნდა იყოს მინიმუმ 2 სიმბოლო
          } @else if (form().get('lastName').errors['maxlength']) {
            არ უნდა აღემატებოდეს 50 სიმბოლოს
          } @else if (form().get('lastName').errors['pattern']) {
            უნდა შეიცავდეს მხოლოდ ქართულ ან მხოლოდ ლათინურ ასოებს
          }
        </small>
      }
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-6">
      <label class="mb-1">სქესი</label>
      <div class="d-flex">
        @for (gender of genders(); track gender.name; let idx = $index) {
          <div class="flex items-center mb-2 me-3">
            <p-radiobutton
              [inputId]="gender.value.toString()"
              id="gender_{{gender.value}}"
              name="gender"
              [value]="gender.value"
              formControlName="gender">
            </p-radiobutton>
            <label [for]="'gender_'+gender.value" class="ms-2">{{ gender.name }}</label>
          </div>
        }
      </div>
      @if (form().get('gender')?.invalid && form().get('gender')?.touched) {
        <small class="text-danger"> ველის შევსება სავალდებულოა </small>
      }
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-6">
      <label class="mb-1" for="personalNumber">პირადი ნომერი</label>
      <input id="personalNumber" pInputText formControlName="personalNumber"/>
      @if (form().get('personalNumber')?.invalid && form().get('personalNumber')?.touched) {
        <small class="text-danger">
          @if (form().get('personalNumber').errors['required']) {
            ველის შევსება სავალდებულოა
          } @else if (form().get('personalNumber').errors['pattern']) {
            უნდა იყოს ზუსტად 11 ციფრი
          }
        </small>
      }
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-6">
      <label class="mb-1" for="mobile">მობილური</label>
      <input id="mobile" pInputText formControlName="mobile" placeholder="5xx xx xx xx"/>
      @if (form().get('mobile')?.invalid && form().get('mobile')?.touched) {
        <small class="text-danger">
          @if (form().get('mobile').errors['required']) {
            ველის შევსება სავალდებულოა
          } @else if (form().get('mobile').errors['pattern']) {
            უნდა იყოს 9 ციფრი და იწყებოდეს 5-იანით
          }
        </small>
      }
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-12">
      <label class="mb-1" for="legalAddress">იურიდიული მისამართი</label>
      <div formGroupName="legalAddress" id="legalAddress" class="d-flex align-items-center">
        <div class="mt-1 w-100">
          <input pInputText formControlName="country" class="w-100"/>
          @if (form().get('legalAddress.country')?.invalid && form().get('legalAddress.country')?.touched) {
            <small class="text-danger"> ველის შევსება სავალდებულოა </small>
          }
        </div>
        <div class="px-2 mt-1 w-100">
          <input pInputText formControlName="city" class="w-100"/>
          @if (form().get('legalAddress.city')?.invalid && form().get('legalAddress.city')?.touched) {
            <small class="text-danger"> ველის შევსება სავალდებულოა </small>
          }
        </div>
        <div class="mt-1 w-100">
          <input pInputText formControlName="address" class="w-100"/>
          @if (form().get('legalAddress.address')?.invalid && form().get('legalAddress.address')?.touched) {
            <small class="text-danger"> ველის შევსება სავალდებულოა </small>
          }
        </div>
      </div>
    </div>
    <div class="d-flex flex-column p-field mb-2 col-md-12">
      <label class="mb-1" for="actualAddress">ფაქტობრივი მისამართი</label>
      <div formGroupName="actualAddress" id="actualAddress" class="d-flex align-items-center">
        <div class="mt-1 w-100">
          <input pInputText formControlName="country" class="w-100"/>
          @if (form().get('actualAddress.country')?.invalid && form().get('actualAddress.country')?.touched) {
            <small class="text-danger"> ველის შევსება სავალდებულოა </small>
          }
        </div>
        <div class="px-2 mt-1 w-100">
          <input pInputText formControlName="city" class="w-100"/>
          @if (form().get('actualAddress.city')?.invalid && form().get('actualAddress.city')?.touched) {
            <small class="text-danger"> ველის შევსება სავალდებულოა </small>
          }
        </div>
        <div class="mt-1 w-100">
          <input pInputText formControlName="address" class="w-100"/>
          @if (form().get('actualAddress.address')?.invalid && form().get('actualAddress.address')?.touched) {
            <small class="text-danger"> ველის შევსება სავალდებულოა </small>
          }
        </div>
      </div>
    </div>

    <div class="d-flex w-100 justify-content-end mt-3">
      <button pButton type="button" label="უკან" severity="secondary" class="ms-3" (click)="goToBack()"></button>
      <button
        pButton type="submit"
        [label]="data().id ? 'რედაქტირება' : 'შენახვა'" severity="primary"
        class="ms-3"
      ></button>
    </div>
  </form>
</p-card>
